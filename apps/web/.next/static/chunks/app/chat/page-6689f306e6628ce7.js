(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{6051:function(e,t,r){Promise.resolve().then(r.bind(r,5466))},5466:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var s=r(7573),n=r(7653),o=r(9264),a=r(1994);let l=n.createContext(void 0),i=()=>{let e=(0,n.useContext)(l);if(!e)throw Error("useSocket must be used within a SocketProvider");return e};class c{on(e,t){this.socket&&this.socket.on(e,t)}off(e,t){this.socket&&this.socket.off(e,t)}emit(e,t){this.socket&&this.socket.emit(e,{message:t})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}constructor(e){this.socket=null,this.socket=(0,o.io)(e,{transports:["websocket"]})}}let d=e=>{let{children:t}=e,[r,o]=(0,n.useState)([{id:1,text:"Hey, welcome!",sent:!1,userName:"Server",timestamp:new Date(Date.now())}]),{username:i}=(0,a.a)(),[d,u]=(0,n.useState)(null),[f,m]=(0,n.useState)(!0),[h,x]=(0,n.useState)(r.length),p=(0,n.useRef)(null);(0,n.useEffect)(()=>{p.current=new Audio("/drop_notification.mp3")},[]),(0,n.useEffect)(()=>{let e=()=>{m(!0),document.title="E-Connect",x(r.length)},t=()=>{m(!1)};return window.addEventListener("focus",e),window.addEventListener("blur",t),()=>{window.removeEventListener("focus",e),window.removeEventListener("blur",t)}},[r]),(0,n.useEffect)(()=>{if(!f&&r.length>h){var e;document.title="\uD83D\uDD25 E-Connect",null===(e=p.current)||void 0===e||e.play()}x(r.length)},[r,f]),(0,n.useEffect)(()=>{let e=new c("http://localhost:8000");u(e);let t=e=>{o(t=>[...t,{...e,sent:!1,timestamp:new Date(e.timestamp)}])};return e.on("event:message",t),()=>{e.off("event:message",t),e.disconnect()}},[]);let g=(0,n.useCallback)(e=>{let t={id:r.length+1,text:e,userName:i,sent:!0,timestamp:new Date};o(e=>[...e,t]),null==d||d.emit("event:message",t)},[d,r,i]);return(0,s.jsxs)(l.Provider,{value:{messages:r,sendMessage:g},children:[t,(0,s.jsx)("audio",{ref:p,src:"/drop_notification.mp3"})]})};var u=r(276),f=r(3187),m=r(1998),h=r(3743),x=r(5974);let p=n.forwardRef((e,t)=>{let{className:r,children:n,...o}=e;return(0,s.jsxs)(h.fC,{ref:t,className:(0,x.cn)("relative overflow-hidden",r),...o,children:[(0,s.jsx)(h.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(g,{}),(0,s.jsx)(h.Ns,{})]})});p.displayName=h.fC.displayName;let g=n.forwardRef((e,t)=>{let{className:r,orientation:n="vertical",...o}=e;return(0,s.jsx)(h.gb,{ref:t,orientation:n,className:(0,x.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...o,children:(0,s.jsx)(h.q4,{className:"relative flex-1 rounded-full bg-border"})})});g.displayName=h.gb.displayName;var v=r(2209);let b=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(v.fC,{ref:t,className:(0,x.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...n})});b.displayName=v.fC.displayName,n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(v.Ee,{ref:t,className:(0,x.cn)("aspect-square h-full w-full",r),...n})}).displayName=v.Ee.displayName;let w=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(v.NY,{ref:t,className:(0,x.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...n})});function y(e){let{userName:t,sent:r}=e,[o,a]=(0,n.useState)("");return(0,n.useEffect)(()=>{a(function(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);let r=t%360;return"hsl(".concat(r,", ").concat(70,"%, ").concat(60,"%)")}(t))},[]),(0,s.jsx)(b,{className:"w-7 h-7 ".concat(r?"ml-2":"mr-2"),style:{backgroundColor:o},children:(0,s.jsx)(w,{style:{backgroundColor:o,color:"white"},children:t.slice(0,2).toUpperCase()})})}w.displayName=v.NY.displayName;var N=r(9274),j=r(2366);function k(e){let{expanded:t,setExpanded:r}=e;return(0,s.jsx)(f.z,{variant:"link",className:"p-0 h-auto font-normal text-default",onClick:()=>r(!t),children:t?(0,s.jsxs)(s.Fragment,{children:["Read less ",(0,s.jsx)(N.Z,{className:"h-3 w-3 ml-1"})]}):(0,s.jsxs)(s.Fragment,{children:["Read more ",(0,s.jsx)(j.Z,{className:"h-3 w-3 ml-1"})]})})}function E(e){let{text:t,timestamp:r,userName:o,sent:a}=e,[l,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),u=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(u.current){let e=parseInt(getComputedStyle(u.current).lineHeight);d(u.current.scrollHeight>5*e)}},[t]),(0,s.jsxs)("div",{className:"flex items-start ".concat(a?"flex-row-reverse":"flex-row"),children:[(0,s.jsx)(y,{userName:o,sent:a}),(0,s.jsxs)("div",{className:"relative max-w-[70%] p-3 rounded-lg ".concat(a?"bg-primary text-primary-foreground":"bg-secondary text-secondary-background"),children:[(0,s.jsx)("div",{className:"mb-1",children:(0,s.jsx)("span",{className:"text-md font-bold",children:o})}),(0,s.jsx)("div",{ref:u,className:"overflow-hidden ".concat(l?"max-h-full":"max-h-[7.5em]"),style:{wordBreak:"break-word"},children:t}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[c&&(0,s.jsx)(k,{expanded:l,setExpanded:i}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground ml-auto ".concat(a?"text-primary-foreground":"text-muted-foreground","\n					"),children:r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!1})})]}),(0,s.jsx)("div",{className:"absolute top-0 w-4 h-4 ".concat(a?"-right-2 bg-primary":"-left-2 bg-secondary"),style:{clipPath:a?"polygon(0 0, 0% 100%, 100% 0)":"polygon(100% 0, 0 0, 100% 100%)"}})]})]})}function C(e){let{message:t}=e;return(0,s.jsx)(E,{text:t.text||"Hey, there!",timestamp:t.timestamp,userName:t.userName||"User",sent:t.sent||!1})}function S(){let{messages:e,sendMessage:t}=i(),[r,o]=(0,n.useState)(""),a=(0,n.useRef)(null),l=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e]);let c=()=>{if(r.trim()){var e;t(r.trim()),o(""),null===(e=a.current)||void 0===e||e.focus()}};return(0,s.jsxs)("div",{className:"flex flex-col h-screen max-w-md mx-auto border rounded-lg overflow-hidden",style:{backgroundImage:"url('/chat-room-bg.jpeg')",backgroundSize:"cover",backgroundPosition:"center"},children:[(0,s.jsx)("header",{className:"bg-primary text-primary-foreground p-4 flex items-center justify-center italic",children:(0,s.jsx)("h1",{className:"text-xl font-bold",children:"E-Connect"})}),(0,s.jsx)(p,{className:"flex-grow relative",children:(0,s.jsx)("div",{className:"p-3 space-y-3",children:e.map((t,r)=>(0,s.jsx)("div",{ref:r===e.length-1?l:null,children:(0,s.jsx)(C,{message:t})},r))})}),(0,s.jsx)("footer",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(m.I,{ref:a,type:"text",placeholder:"Type a message...",value:r,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.key&&c()},className:"h-12 px-4 border border-white bg-gray rounded-md focus:outline-none focus:border-white focus:ring-1 focus:ring-white placeholder:text-gray-700"}),(0,s.jsxs)(f.z,{onClick:c,className:"h-12 w-12 bg-primary text-white rounded-md flex items-center justify-center hover:bg-primary-dark",children:[(0,s.jsx)(u.Z,{className:"h-6 w-6"}),(0,s.jsx)("span",{className:"sr-only",children:"Send message"})]})]})})]})}r(225);var R=()=>(0,s.jsx)(d,{children:(0,s.jsx)(S,{})})},3187:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(7573),n=r(7653),o=r(2721),a=r(47),l=r(5974);let i=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,asChild:c=!1,...d}=e,u=c?o.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(i({variant:n,size:a,className:r})),ref:t,...d})});c.displayName="Button"},1998:function(e,t,r){"use strict";r.d(t,{I:function(){return a}});var s=r(7573),n=r(7653),o=r(5974);let a=n.forwardRef((e,t)=>{let{className:r,type:n,...a}=e;return(0,s.jsx)("input",{type:n,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});a.displayName="Input"},1994:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return l},a:function(){return a}});var s=r(7573),n=r(7653);let o=(0,n.createContext)(void 0),a=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useUser must be used within a UserProvider");return e},l=e=>{let{children:t}=e,[r,a]=(0,n.useState)("User");return(0,s.jsx)(o.Provider,{value:{username:r,setUsername:a},children:t})}},5974:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var s=r(7908),n=r(6290);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},225:function(){}},function(e){e.O(0,[151,909,5,293,286,744],function(){return e(e.s=6051)}),_N_E=e.O()}]);